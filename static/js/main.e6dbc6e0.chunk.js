(window["webpackJsonpxc-live-viewer"]=window["webpackJsonpxc-live-viewer"]||[]).push([[0],{38:function(e){e.exports=JSON.parse('[{"featureType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"administrative.land_parcel","stylers":[{"visibility":"off"}]},{"featureType":"administrative.neighborhood","stylers":[{"visibility":"off"}]},{"featureType":"poi","elementType":"labels.text","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"labels.text","stylers":[{"visibility":"off"}]}]')},47:function(e,t,n){e.exports=n(82)},74:function(e,t,n){},78:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),i=n.n(r),c=n(6),s=n(102),l=n(35),u=n.n(l),f=n(101),d=n(103),m=n(41),h=n.n(m),g=n(42),E=n.n(g),p=n(40),v=n.n(p),b=(n(74),null);var y=function(){var e=Object(a.useState)({ready:!1,error:!1}),t=Object(c.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){null===b&&(b=new Promise((function(e,t){console.log("Loading Google Maps API ...");var n=document.createElement("script");n.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBCrP5uoEJXfEvz8f_y1HgzQnqUGHz0Aak",n.async=!0,n.addEventListener("load",(function(){return e(!0)})),n.addEventListener("error",(function(){return e(!1)})),document.body.appendChild(n)}))),b.then((function(e){e?(console.log("Google Maps API loaded."),o({ready:!0,error:!1})):(console.log("Error: Cannot load Google Maps API."),o({ready:!1,error:!0}))}))}),[]),[n.ready,n.error,n.ready?window.google:null]},w=n(98),O=n(100),C=n(99),S=n(37),N=n.n(S),I=Object(w.a)((function(e){return{progress:{margin:e.spacing(2)}}})),T=function(e){var t=e.message,n=e.hideIf,a=e.subRef,r=I();return o.a.createElement(s.a,{width:"100%",height:"100%",display:n?"none":"flex",alignItems:"center",justifyContent:"center",ref:a},o.a.createElement(s.a,{textAlign:"center"},o.a.createElement(C.a,{className:r.progress}),o.a.createElement(O.a,null,t)))},k=function(e){var t=e.message,n=e.hideIf,a=I();return o.a.createElement(s.a,{width:"100%",height:"100%",display:n?"none":"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(s.a,{textAlign:"center"},o.a.createElement(N.a,{fontSize:"large",color:"error",className:a.progress}),o.a.createElement(O.a,{color:"error"},t)))},j=n(38),x=function(){var e=y(),t=Object(c.a)(e,3),n=t[0],r=t[1],i=t[2],l=Object(a.useRef)(),u=Object(a.useState)(null),f=Object(c.a)(u,2),d=f[0],m=f[1];return Object(a.useLayoutEffect)((function(){n&&!d&&m(new i.maps.Map(l.current,{center:{lat:46.509012,lng:11.827984},mapTypeId:"terrain",zoom:12,disableDefaultUI:!0,scaleControl:!0,fullscreenControl:!0,styles:j}))}),[n,d,i,l]),o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{width:"100%",height:"100%",display:n?"block":"none",ref:l}),o.a.createElement(T,{message:"Loading Maps ...",hideIf:n||r}),o.a.createElement(k,{message:"Unable to load map!",hideIf:!r}))},A=n(25),M=n(15),R=n(39);function L(e,t,n){return function(){var o=Object(a.useState)(n),r=Object(c.a)(o,2),i=r[0],s=r[1];return Object(a.useEffect)((function(){var n=e instanceof Function?e():e,a=function(e){s(e)};return n.addListener(t,a),function(){n.removeListener(t,a)}}),[]),i}}var W={CONNECTING:"connecting",ERROR:"error",ESTABLISHED:"established",ACTIVE:"active",INACTIVE:"inactive",NO_CONNECTION:"no connection",NO_INFORMATION:"no information"},z=function(){function e(t,n,a){var o=this;Object(A.a)(this,e),this.onOpen=function(){console.log("WS:Open!"),o.setConnectionState(W.ESTABLISHED),o.sock.send(JSON.stringify({tag:"WebFilterArea",area:[{lat:-90,lon:-180},{lat:90,lon:180}]})),o.sock.send(JSON.stringify({tag:"WebFilterContest",contents:"alpha9999"})),o.sock.send(JSON.stringify({tag:"WebFollow",contents:[]}))},this.onMessage=function(e){console.log("WS:Message!"),o.setConnectionState(W.ACTIVE);var t=JSON.parse(e.data);console.log("Received: ",t),clearTimeout(o.watchdog),o.watchdog=setTimeout((function(){this.setConnectionState(W.INACTIVE)}),7e4)},this.onClose=function(e){console.log("WS:Close!"),o.setConnectionState(W.NO_CONNECTION),setTimeout(o.connect.bind(o),3e3),console.log("Connection is closed.",e)},this.onError=function(e){console.log("WS:Error!")},this.setConnectionState=t,this.connect()}return Object(M.a)(e,[{key:"connect",value:function(){"WebSocket"in window?(this.setConnectionState(W.CONNECTING),this.sock=new WebSocket("wss://live.xcontest.org/websock/webclient"),this.sock.onopen=this.onOpen,this.sock.onmessage=this.onMessage,this.sock.onclose=this.onClose,this.sock.onerror=this.onError):(this.setConnectionState(W.ERROR),alert("WebSocket NOT supported by your Browser!"))}}]),e}(),F=function e(){var t=this;Object(A.a)(this,e),this.onConnectionStateChanged=function(e){console.log("New connection state: ",e),t.eventEmitter.emit("connectionStateChanged",e)},this.onInfoMessageReceived=function(e){},this.onTracklogMessageReceived=function(e){},this.pilots={},this.shortTracks={},this.eventEmitter=new R.EventEmitter,this.socket=new z(this.onConnectionStateChanged)},J=null,G=function(){return J||(J=new F),J},B=L((function(){return G().eventEmitter}),"pilotStateChanged",[]),_=L((function(){return G().eventEmitter}),"connectionStateChanged",W.NO_INFORMATION),H=(L((function(){return G().eventEmitter}),"shortTracksChanged",{}),function(){var e=_(),t=B();return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,null,"State: ",e),o.a.createElement(s.a,null,t.length))});function P(){var e=o.a.useState(1),t=Object(c.a)(e,2),n=t[0],a=t[1],r=o.a.useState(0),i=Object(c.a)(r,2),l=i[0],m=i[1],g=function(){m(window.innerHeight)};o.a.useEffect((function(){return g(),window.addEventListener("resize",g),function(){return window.removeEventListener("resize",g)}}),[]);return o.a.createElement(s.a,{height:l,display:"flex",flexDirection:"column"},o.a.createElement(s.a,{flexGrow:1,clone:!0},o.a.createElement(u.a,{disabled:!0,index:n},o.a.createElement(s.a,{width:"100%",height:"100%"},o.a.createElement(x,null)),o.a.createElement(s.a,{width:"100%",height:"100%"},o.a.createElement(H,null)),o.a.createElement(s.a,{width:"100%",height:"100%"},"Item Three"))),o.a.createElement(s.a,{zIndex:100,boxShadow:3},o.a.createElement(f.a,{value:n,onChange:function(e,t){return a(t)},showLabels:!0},o.a.createElement(d.a,{label:"Map",icon:o.a.createElement(v.a,null)}),o.a.createElement(d.a,{label:"Favorites",icon:o.a.createElement(h.a,null)}),o.a.createElement(d.a,{label:"Nearby",icon:o.a.createElement(E.a,null)}))))}var D=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(P,null))};n(78),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(79).config(),i.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[47,1,2]]]);
//# sourceMappingURL=main.e6dbc6e0.chunk.js.map